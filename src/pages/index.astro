---
import { getCollection } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Header from '../components/Header.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';

const caseStudies = (await getCollection('caseStudies')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
const latestStudy = caseStudies[0];
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
		<style>
			.hero {
				text-align: center;
				padding: 3em 1em;
			}
			.hero img {
				width: 120px;
				height: 120px;
				border-radius: 50%;
				margin-bottom: 1em;
			}
			.hero h1 {
				font-size: 2.5em;
				margin-bottom: 0.25em;
			}
			.hero .tagline {
				font-size: 1.25em;
				color: rgb(var(--gray));
				margin: 0;
			}

			.section {
				padding: 2em 0;
			}
			.section-title {
				text-align: center;
				margin-bottom: 1.5em;
			}

			.services-grid {
				display: grid;
				grid-template-columns: repeat(2, 1fr);
				gap: 1.5rem;
				list-style: none;
				margin: 0;
				padding: 0;
			}
			.service-card {
				padding: 1.5em;
				border-radius: 12px;
				background: white;
				box-shadow: var(--box-shadow);
			}
			.service-card h3 {
				color: var(--accent-dark);
				margin-bottom: 0.5em;
			}
			.service-card p {
				color: rgb(var(--gray-dark));
				margin: 0;
				font-size: 0.95em;
				line-height: 1.5;
			}

			.teaser {
				display: block;
				padding: 1.5em;
				border-radius: 12px;
				background: white;
				box-shadow: var(--box-shadow);
				text-decoration: none;
				transition: transform 0.2s ease;
			}
			.teaser:hover {
				transform: translateY(-2px);
			}
			.teaser h3 {
				color: rgb(var(--black));
				margin-bottom: 0.5em;
			}
			.teaser p {
				color: rgb(var(--gray-dark));
				margin: 0 0 0.5em 0;
			}
			.teaser .date {
				color: rgb(var(--gray));
				font-size: 0.85em;
			}

			.about-snippet {
				text-align: center;
				max-width: 640px;
				margin: 0 auto;
			}
			.about-snippet p {
				color: rgb(var(--gray-dark));
				line-height: 1.7;
			}
			.about-snippet a {
				color: var(--accent-dark);
				font-weight: 700;
			}

			@media (max-width: 720px) {
				.hero h1 {
					font-size: 2em;
				}
				.services-grid {
					grid-template-columns: 1fr;
				}
			}
		</style>
	</head>
	<body>
		<Header />
		<main>
			<!-- Hero -->
			<section class="hero">
				<img src="/ginger-logo.png" alt="Noe Software Solutions logo" />
				<h1>Noe Software Solutions</h1>
				<p class="tagline">AI/ML engineering and consulting for production systems</p>
			</section>

			<!-- Services -->
			<section class="section">
				<h2 class="section-title">Services</h2>
				<ul class="services-grid">
					<li class="service-card">
						<h3>Model Development</h3>
						<p>Custom ML models from prototype to production — transformer-based NLP, classification, and multi-label systems built for your domain.</p>
					</li>
					<li class="service-card">
						<h3>Strategy Consulting</h3>
						<p>Technical assessment of AI/ML opportunities. Identify where machine learning adds real value and build a roadmap to get there.</p>
					</li>
					<li class="service-card">
						<h3>Fine-Tuning &amp; Optimization</h3>
						<p>Take pre-trained models and adapt them to your specific data. Reduce latency, improve accuracy, and optimize for production constraints.</p>
					</li>
					<li class="service-card">
						<h3>Data Pipelines</h3>
						<p>End-to-end data infrastructure — collection, labeling, validation, and training pipelines that scale with your needs.</p>
					</li>
				</ul>
			</section>

			<!-- Case Study Teaser -->
			{latestStudy && (
				<section class="section">
					<h2 class="section-title">Latest Case Study</h2>
					<a href={`/case-studies/${latestStudy.id}/`} class="teaser">
						<h3>{latestStudy.data.title}</h3>
						<p>{latestStudy.data.description}</p>
						<span class="date">
							<FormattedDate date={latestStudy.data.pubDate} />
						</span>
					</a>
				</section>
			)}

			<!-- About Snippet -->
			<section class="section">
				<div class="about-snippet">
					<h2 class="section-title">About</h2>
					<p>
						30+ years of engineering experience spanning C++ trading systems, real-time bidding platforms, and modern ML/NLP pipelines. Specializing in transformer-based classification, LLM integration, and high-performance data systems.
					</p>
					<a href="/about">Learn more &rarr;</a>
				</div>
			</section>
		</main>
		<Footer />
	</body>
</html>
